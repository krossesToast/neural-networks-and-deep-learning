<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Digit Drawer (28x28)</title>
	<style>
		body { font-family: sans-serif; }
		canvas { border: 1px solid #999; touch-action: none; }
	</style>
</head>
<body>
	<h3>Draw a digit</h3>
	<p>Draw in the big canvas. Then download a 28x28 PNG.</p>

	<canvas id="c" width="280" height="280"></canvas><br>
	<button id="clear">Clear</button>
	<button id="download">Download 28x28 PNG</button>

	<script>
		const c = document.getElementById("c");
		const ctx = c.getContext("2d");
		ctx.fillStyle = "black";
		ctx.fillRect(0, 0, c.width, c.height);
		ctx.lineWidth = 20;
		ctx.lineCap = "round";
		ctx.strokeStyle = "white";

		let drawing = false;

		function pos(e) {
			const r = c.getBoundingClientRect();
			const x = (e.touches ? e.touches[0].clientX : e.clientX) - r.left;
			const y = (e.touches ? e.touches[0].clientY : e.clientY) - r.top;
			return {x, y};
		}

		function start(e) { drawing = true; const p = pos(e); ctx.beginPath(); ctx.moveTo(p.x, p.y); e.preventDefault(); }
		function move(e) { if (!drawing) return; const p = pos(e); ctx.lineTo(p.x, p.y); ctx.stroke(); e.preventDefault(); }
		function end(e) { drawing = false; e.preventDefault(); }

		c.addEventListener("mousedown", start);
		c.addEventListener("mousemove", move);
		c.addEventListener("mouseup", end);
		c.addEventListener("mouseleave", end);

		c.addEventListener("touchstart", start, {passive:false});
		c.addEventListener("touchmove", move, {passive:false});
		c.addEventListener("touchend", end, {passive:false});

		document.getElementById("clear").onclick = () => {
			ctx.fillStyle = "black";
			ctx.fillRect(0, 0, c.width, c.height);
		};

		document.getElementById("download").onclick = () => {
			const small = document.createElement("canvas");
			small.width = 28; small.height = 28;
			const sctx = small.getContext("2d");
			sctx.drawImage(c, 0, 0, 28, 28);

			const a = document.createElement("a");
			a.download = "digit.png";
			a.href = small.toDataURL("image/png");
			a.click();
		};
	</script>
</body>
</html>